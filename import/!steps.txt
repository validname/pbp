
---- таблицы:

import_modules - модули импорта, id_import_mod
import_types - типы данных для импорта, id_trans_type
import_map_acc - настройки мэппинга внешних и внутренних счетов, id_map_acc
import_map_cat - настройки мэппинга внешних и внутренних категорий, id_map_cat
import_map_subcat - настройки мэппинга внешних и внутренних подкатегорий, id_map_subcat
import_map_subcat2 - настройки мэппинга внешних и внутренних под2категорий, id_map_subcat2
import_draft - промежуточные закачанные извне данные для импорта, id_draft

В идеале - должны быть одна таблица мэппинга, ставящая в соответствие входящим счету и (под)категориям
внутренние счет и (под)категории. Это - предельная гибкость для последующего счета
(например, в системе учета я считаю расходы на бензин как транспортные расходы, а в PBP я их буду учитывать
как расходы на "безделушки и игрушки" с другого счета).
Но, в текущем модуле импорта жесткие ограничения:
 - между счетами пересечений нет, т.е. две разных категории входящих транзакций никогда не попадут
   на разные счета PBP.
Поэтому и введены различные таблицы для мэппинга - для счетов отдельно, для (под2)категорий - отдельно.

--- общее:

 step1 - 	внутри1: удаление из import_draft
		внутри2: прием файла, выбор модуля
		вывод: выбор источника данных, выбор формата и закачка файла. 
		Обработчик формы - step1, "далее" - step2

--- в модулях импорта:

---------- в odbc_homebuh

 import_draft:			д/р	пер.счетами	долги
	date			+	+		+
	account			+	+		+
	cat			+	корр.счет	
	subcat			+	
	sub2cat			+
	quantity		+	
	value			+	+		+
	comment			+	+		ФИО и comment
	id_trans_type
	change_type

 step2 - 	внутри1: перекачка всех данных в import_draft, поиск первой и последней даты.
		внутри2: удаление из import_draft ненужных дат и типов транзакций
		вывод: выбор дат импорта
		(////, выбор видов импорта - типов транзакций:	(1) расходы, 2) доходы, 3) перемещения между счетами, 4) долговые отношения)///). 
		Обработчик формы - step2, "далее" - step3

 step3 - 	внутри: сохранение мэппинга в import_map_acc
		вывод: настройка мэппинга счетов. Обработчик формы - step3, "далее" - step4

 step4 (р) - 	внутри: сохранение мэппинга в import_map_cat
		настройка мэппинга категорий, подкатегорий и под2категорий. Обработчик формы - step4, "далее" - step5

 step5 (д) - 	внутри: сохранение мэппинга в import_map_cat
		настройка мэппинга категорий. Обработчик формы - step5, "далее" - step6

 step6 (р) - 	внутри1: поиск изменений в import_draft по сравнению с PBP, удаление полностью одинаковых,
		на оставшиеся ставится флаг change_type: changed, added или deleted.
		внутри2: внесение изменений в PBP
		вывод: весь список изменений c формами выбора записей импорта. 
		Обработчик формы - step6, "далее" - step7

 step7 (д) - 	внутри1: поиск изменений в import_draft по сравнению с PBP, удаление полностью одинаковых,
		на оставшиеся ставится флаг change_type: changed, added или deleted.
		внутри2: внесение изменений в PBP
		вывод: весь список изменений c формами выбора записей импорта. 
		Обработчик формы - step7, "далее" - step8

 step8 (сч) - 	внутри1: поиск изменений в import_draft по сравнению с PBP, удаление полностью одинаковых,
		на оставшиеся ставится флаг change_type: changed, added или deleted.
		внутри2: внесение изменений в PBP
		вывод: весь список изменений c формами выбора записей импорта. 
		Обработчик формы - step8, "далее" - нет

---------- в CSV

