
вынести подсчет баланса счетов в func_finanice
вынести поиск порога "особенных" расходов в func_finance, сделать форму пересчета, добавить вызов в импорт
в графике сделать выбор спец-да,нет,не важно

 Действия:

 1. Ввод расходов
	(+ внизу фильтр суммы - счета-карманы и дата, по умолчанию показываются суммарные ненулевые расходы 
	из карманов, за сегодня + остатки этих счетов. Там же ссылка - "Компенсировать расходы")
	Показываются только расходы по фильтру даты
 2. Компенсация расходов
	По фильтру даты, счета-кармана и категорий расходов, расходы округляются (точность округлений!) и предлагается
	сделать перенос из привязанных счетов в карман
	Если фильтр пустой - предлагается поставить дату с последней компенсации
	Перераспределение! если не хватает денег на расходном счете
 3. Ввод доходов
	(+ внизу фильтр суммы - счета и дата, по умолчанию показываются суммарные доходы за текущий месяц) 
 	Показываются только доходы по фильтру даты. Там же ссылка - "перенести доходы в накопитель".
 4. Перенос доходов 
	По фильтру даты предлагается перенести со счетов (не: накопителя, карманов, расходных, долгового) в накопитель
	с округлением.
	Перераспределение! Поиск перенесенной суммы.
 5. Перемещения между счетами
 6. Отчеты:
	Расходы/доходы по категориям, счетам, датам.
	Расходы/доходы по категориям, счетам, датам с промежуточной группировкой по дате
	Остатки на счетах - по счетам, дате.
	Контроль компенсаций расходов - с группировкой по датам компенсаций

!!! ошибки!!!

1. в графиках перепутаны местами кнопки "типичные" и "нетипичные" расходы
2. в графика должны быть месяцы с расходом 0, если расходов в них не было.
3. если к счету привязано несколько категорий, тогда в бюджете, что добавить/отнять нужно считать не построчно, а с учетом всех привязанных категорий

Изменение структуры:

Типы счетов:
- счет-накопитель доходов (один!) 
- счета-карманы
- расходые счета
- пластиковые карты
- банковские вклады
- долговой счет
- остальные счета

Транзакции:
- поле пользователя

Пользователи:
- логин
- пароль
- имя
- показывать доходы - кому?
- показывать расходы - кому?
- флаг админа

Справочники:
1. savings - не работает добавление!
2. категории и подкатегории
        
Балансировка:

value < 0 - это расход, value > 0 - приход
Если стоит id_trasfer - то он указывает на двойную запись, обе записи - это перемещение между счетами
Записи о перемещениях дублируют все поля (кроме счета), которые должны быть одинаковы (иначе - дисбаланс и ошибка!).
При показе перемещений, делаем сортировку и просто берем все поля из записи с value<0 - списание со счета)

----------- сделать проверку БД!!!!

Сделать фенечки:

транзакции: если показываются операции со счетом - считать перемещения с разными знаками, показывать баланс
на конец периода

сделать так, чтобы разные расходные статьи могли быть привязаны к одному и тому же счету

0. Импорт - если нечего импортировать, сразу переходить на следующий шаг
   Показывать в настройках мэппинга (внизу), есть ли неимпортируемые категории, есть ли "сливающиеся" вместе категории

1. Импорт - выводить статистику, что столько выбрано на добавление X/всего, удаление Y/всего и т.д.

2. Импорт - Сделать наконец галку "выбрать все на добавление/удаление/изменение"

1. Повешать хоткеи на вверх-вниз - передвижение по таблице.

Справочники
- Категории расходов
- Категории доходов
- Подкатегории расходов
- Подкатегории доходов
- Списки подкатегорий расходов

Счета
? Баланс счетов (накопления!, по категориям-листам)
+ Накопления на счетах

Транзакции
- Расходы
- Доходы
- Перемещения между счетами

Бюджетирование
+ Месячный бюджет
+ Графики расходов
- Графики расходов (гармон. ряды, колебания)

Поиск!

Операции
- Бэкап
? Импорт
- Экспорт